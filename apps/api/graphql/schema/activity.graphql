"""
Activity logging
"""
type Activity {
	id: ID!
	kind: String!
	title: String!
	summary: String
	status: String
	progress: Float
	details: JSON
	userId: ID!
	workspaceId: ID
	occurredAt: DateTime!
	createdAt: DateTime!

	"""
	User who performed the activity
	"""
	user: User!
}

extend type Query {
	"""
	Get activity log (recent activities)
	"""
	activities(limit: Int, offset: Int): [Activity!]!

	"""
	Get active jobs (pending or running) for the current workspace
	"""
	activeJobs: [Job!]!

	"""
	Get recent jobs (active and completed) for the current workspace
	"""
	recentJobs(limit: Int, offset: Int): [Job!]!
}

extend type Mutation {
	"""
	Cancel a queued or running provider transfer job
	"""
	cancelTransferJob(jobId: ID!): Boolean!
}

"""
Job status for trackable long-running operations
"""
enum JobStatus {
	PENDING
	RUNNING
	COMPLETED
	ERROR
}

"""
A trackable job representing a long-running operation (sync, upload, etc.)
"""
type Job {
	id: ID!
	type: String!
	title: String!
	message: String
	progress: Float!
	status: JobStatus!
	metadata: JSON
	createdAt: DateTime!
	updatedAt: DateTime!
}

type Subscription {
	"""
	Subscribe to job updates for the current workspace
	"""
	jobUpdated: Job!

	"""
	Subscribe to newly created activities for the current user
	"""
	activityCreated: Activity!
}
